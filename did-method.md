# PML DID Method Specification
## 1. DID Naming Scheme
DID format is did:pml:[method-specific-id].

### 1.1. DID Method Name
DID method name of this scheme is pml. A DID that uses this scheme MUST begin with the following prefix: did:pml:.The prefix MUST be in lowercase. The remainder of the DID is the method-specific identifier specified below.

### 1.2. Method-specific Identifier(MSI)
We provide two methods to generate MSI for different purposes. MSI of first method is without identity information and generated by public key, we call it Key MSI. Second method is with identity information, we call it Identity MSI.

#### 1.2.1. Key MSI
Key MSI should be encoded as follow:
```
(1) Generate random public key through secp256k1 algorithm.
(2) Use ripemd160 hash public key type and public key, they are connected by character |.
(3) Use base58 encode hash value to obtain the method-specific-id.
```
This encoding process can be described as method-specific-id=base58(ripemd160(public key type|public key)).

pml-did = did:pml:[method-specific-id]

method-specific-id = 32(maximum)*58(base58char)

base58char = "1" / "2" / "3" / "4" / "5" / "6" / "7" / "8" / "9" /
"A" / "B" / "C" / "D" / "E" / "F" / "G" / "H" / "J" / "K" / "L" / "M" / 
"N" / "P" / "Q" / "R" / "S" / "T" / "U" / "V" / "W" / "X" / "Y" / "Z" /
"a" / "b" / "c" / "d" / "e" / "f" / "g" / "h" / "i" / "j" / "k" / "m" / "n" /
"o" / "p" / "q" / "r" / "s" / "t" / "u" / "v" / "w" / "x" / "y" / "z"

Examples:
```
did:pml:5youxpsdXq5L8fj1g1MLPxmm2qDUdfjYe59DoAXgAVZZyCfyMRVnFGF
```
#### 1.2.2. Identity MSI
Identity MSI is encoded by combination of partial ASCII characters, it can describe identity or others information. The maximum length of identity MSI is 256 characters.

pml-did = did:pml:[method-specific-id]

method-specific-id = 256(maximum)*64(partial ASCII char)

partial ASCII char = "0" ~ "9", "A" ~ "Z", "a" ~ "z", "/", "."

Examples:
```
did:pml:www.pmlabs.com.cn
```
	
## 2. DID Document Format
Here DID is encoded by Key MSI. DID document format looks like below and field "signatureValue" is signed by self private key:
```json
{
  "@context": "https://www.w3.org/ns/did/v1", 
  "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
  "created": "2021-03-04T15:03:21Z", 
  "updated": "2021-03-04T15:03:21Z", 
  "verificationMethod": [
    {
      "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#keys-1", 
      "type": "EcdsaSecp256k1VerificationKey2019", 
      "publicKeyBase58": "AKJP3f7BD6W4iWEQ9jwndVTCBq8ua2Utt8EEjJ6Vxsf"
    }
  ], 
  "authentication": [
    "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#keys-1"
  ], 
  "service": [
    {
      "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#resolver", 
      "type": "DIDResolve", 
      "serviceEndpoint": "https://did.pmlabs.com"
    }
  ], 
  "proof": {
    "type": "EcdsaSecp256k1VerificationKey2019", 
    "creator": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
    "signatureValue": "3045022100f.....06098dc79af826b4a67"
  }
}
```

## 3. CRUD Operation Definitions

### 3.1. DID Creation
A DID document is created by send an HTTP POST request containing document elements. POST request content is JSON text format, it’s format looks like this: 
```json
{
  "did": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
  "operation": "create", 
  "document": {
    "@context": "https://www.w3.org/ns/did/v1", 
    "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
    "created": "2021-03-04T15:03:21Z", 
    "updated": "2021-03-04T15:03:21Z", 
    "verificationMethod": [
      {
        "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
        "type": "EcdsaSecp256k1VerificationKey2019", 
        "publicKeyBase58": "AKJP3f7BD6W4iWEQ9jwndVTCBq8ua2Utt8EEjJ6Vxsf"
      }
    ], 
    "authentication": [
      "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1"
    ], 
    "service": [
      {
        "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#resolver", 
        "type": "DIDResolve", 
        "serviceEndpoint": "https://did.pmlabs.com"
      }
    ], 
    "proof": {
      "type": "EcdsaSecp256k1VerificationKey2019", 
      "creator": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
      "signatureValue": "3045022100f.....06098dc79af826b4a67"
    }
  }
}
```

### 3.2. DID Read
A DID document can be read by sending an HTTP GET request.

If you want to read any DID document, you can use curl tool and execute curl command as curl https://did.pmlabs.com/v1/did/resolve/did:pml:[method-specific-id]. Response result looks like this:
```json
{
  "respCode": 0, 
  "respMessage": "success", 
  "respContent": {
    "document": {
      "@context": "https://www.w3.org/ns/did/v1", 
      "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
      "created": "2021-03-04T15:03:21Z", 
      "updated": "2021-03-04T15:03:21Z", 
      "verificationMethod": [
        {
          "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
          "type": "EcdsaSecp256k1VerificationKey2019", 
          "publicKeyBase58": "AKJP3f7BD6W4iWEQ9jwndVTCBq8ua2Utt8EEjJ6Vxsf"
        }
      ], 
      "authentication": [
        "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1"
      ], 
      "service": [
        {
          "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#resolver", 
          "type": "DIDResolve", 
          "serviceEndpoint": "https://did.pmlabs.com"
        }
      ], 
      "proof": {
        "type": "EcdsaSecp256k1VerificationKey2019", 
        "creator": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
        "signatureValue": "3045022100f.....06098dc79af826b4a67"
      }
    }
  }
}
```

### 3.3. DID Update
Currently, we support update public key and service. You can send an HTTP POST request containing document elements to update any DID document. POST request content is JSON text format, it’s format looks like below and field "signatureValue" is signed by previous self private key:
```json
{
  "did": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
  "operation": "update", 
  "document": {
    "@context": "https://www.w3.org/ns/did/v1", 
    "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
    "created": "2021-03-04T16:03:21Z", 
    "updated": "2021-03-04T16:03:21Z", 
    "verificationMethod": [
      {
        "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
        "type": "EcdsaSecp256k1VerificationKey2019", 
        "publicKeyBase58": "AKJP3f7BD6W4iWEQ9jwndVTCBq8ua2Utt8EEjJ6Vxsf"
      }
    ], 
    "authentication": [
      "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1"
    ], 
    "service": [
      {
        "id": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#resolver", 
        "type": "DIDResolve", 
        "serviceEndpoint": "https://did.pmlabs.com"
      }
    ], 
    "proof": {
      "type": "EcdsaSecp256k1VerificationKey2019", 
      "creator": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF#key-1", 
      "signatureValue": "3045022100f.....06098dc79af826b4a67"
    }
  }
}
```
	
### 3.4. DID Delete(Revoke)
You can send an HTTP POST request to delete any DID document. POST request content is JSON text format, it’s format looks like this:
```json
{
  "did": "did:pml:5youxpsdXq5L8fj1g1....oAXgAVZZyCfyMRVnFGF", 
  "operation": "delete", 
  "signature": "212w6nedqdm2wd.....asxkapp1kw12w5w"
}
```
	
## 4. Security and Privacy Considerations
(1) The information related to user's privacy is not saved in blockchain network or authority agency.
	
(2) The private key is saved in user's device and it can't be read by others.
	
(3) DID documents use signature technology to guarantee integrity and authenticity.
	
